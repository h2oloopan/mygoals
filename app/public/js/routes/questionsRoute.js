// Generated by CoffeeScript 1.7.1
define(['jquery', 'me', 'tinymce/tiny_mce', 'ehbs!templates/questions/questions.new'], function($, me) {
  var QuestionsRoute;
  QuestionsRoute = {
    setup: function(App) {
      App.Router.map(function() {
        return this.resource('questions', function() {
          return this.route('new');
        });
      });
      App.QuestionsRoute = Ember.Route.extend({
        beforeModel: function() {
          var thiz;
          thiz = this;
          return me.auth.check().then(function(user) {
            if (user == null) {
              return thiz.transitionTo('login');
            }
          }, function(errors) {
            return thiz.transitionTo('login');
          });
        }
      });
      return App.QuestionsNewView = Ember.View.extend({
        didInsertElement: function() {
          this._super();
          return tinyMCE.init({
            theme: 'advanced',
            mode: 'textareas',
            plugins: 'latex',
            theme_advanced_buttons1: 'latex',
            theme_advanced_buttons2: '',
            theme_advanced_buttons3: ''
          });
        }
      });
    }
  };
  return QuestionsRoute;
});
