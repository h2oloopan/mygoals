// Generated by CoffeeScript 1.7.1
var createJs, createModel, createSerializer, js, me, toSend, toSkip;

me = require('./mongo-ember');

toSkip = ['__v'];

toSend = null;

createModel = function(schema) {
  return '';
};

createSerializer = function(schema) {
  return '';
};

createJs = function(name, schema) {
  var js;
  console.log(name);
  console.log(schema);
  js = 'models["' + name + '"] = DS.Model.extend({' + createModel(schema) + '}); adapters["' + name + '"] = DS.RESTAdapter.extend({' + (me.settings.namespace ? 'namespace: "' + me.settings.namespace + '"' : '') + '}); serializers["' + name + '"] = DS.RESTSerializer.extend({' + createSerializer(schema) + '});';
  return js;
};

js = module.exports = {
  addModel: function(model) {
    var key, keys, name, paths, _i, _len;
    name = model.modelName;
    paths = model.schema.paths;
    keys = Object.keys(paths);
    for (_i = 0, _len = keys.length; _i < _len; _i++) {
      key = keys[_i];
      if (toSkip.indexOf(key) >= 0) {
        delete paths[key];
      }
    }
    js = createJs(name, paths);
    if (toSend != null) {
      toSend += js;
    } else {
      toSend = js;
    }
    return console.log(toSend);
  },
  middleware: function(req, res, next) {
    return next();
  }
};
