// Generated by CoffeeScript 1.7.1
define([], function() {
  var me;
  me = {
    version: '{{version}}',
    models: '{{models}}',
    validators: {
      required: function(value) {
        if (value === null || value === void 0) {
          return false;
        } else {
          return true;
        }
      },
      match: function(value, parameters) {
        var regExp;
        regExp = parameters[0];
        return null !== value && ('' !== value ? regExp.test(value) : true);
      }
    },
    notify: function() {
      return alert('Hello World!');
    },
    attach: function(App, names) {
      var name, _i, _len;
      for (_i = 0, _len = names.length; _i < _len; _i++) {
        name = names[_i];
        App[name] = DS.Model.extend(this.models[name].model);
        App[name + 'Adapter'] = DS.RESTAdapter.extend(this.models[name].adapter);
        App[name + 'Serializer'] = DS.RESTSerializer.extend(this.models[name].serializer);
        App[name].reopen({
          errors: {},
          validate: function() {
            var message, parameters, path, result, type, validations, validator;
            validations = this.models[name].validations;
            for (path in validations) {
              type = validations[path].type;
              parameters = validations[path].parameters;
              message = validations[path].message;
              validator = this.validators[type];
              result = validator(this.get(path), parameters);
              if (!result) {
                this.errors[path] = message;
              }
            }
          }
        });
      }
    },
    auth: {
      signup: function(user) {
        var data, url;
        url = '{{url_signup}}';
        data = JSON.stringify({
          user: user.toJSON()
        });
        return new Ember.RSVP.Promise(function(resolve, reject) {
          return $.ajax({
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            url: url,
            data: data,
            dataType: 'json'
          }).done(function(data) {
            return resolve(data);
          }).fail(function(data) {
            return reject(data.responseText);
          });
        });
      },
      login: function(user) {
        var url;
        url = '{{url_login}}';
        if (typeof user.toJSON === 'function') {
          user = user.toJSON();
        }
        return $.post(url, {
          user: user
        });
      },
      check: function() {
        var url;
        url = '{{url_check}}';
        return new Ember.RSVP.Promise(function(resolve, reject) {
          return $.get(url).done(function(data) {
            return resolve(data);
          }).fail(function(data) {
            return resolve(null);
          });
        });
      }
    }
  };
  return me;
});
