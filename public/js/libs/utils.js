// Generated by CoffeeScript 1.6.3
(function() {
  define(['jquery'], function($) {
    var utils;
    return utils = {
      serialize: function(element, trim) {
        var a, form, o;
        if (trim == null) {
          trim = false;
        }
        o = {};
        if ($(element).is('form')) {
          form = element;
        } else {
          form = $('<form></form>').append($(element).clone());
        }
        a = form.serializeArray();
        $.each(a, function() {
          var value;
          if (o[this.name] !== void 0) {
            if (!o[this.name].push) {
              o[this.name] = [o[this.name]];
            }
            value = this.value || '';
            if (trim) {
              value = $.trim(value);
            }
            return o[this.name].push(value);
          } else {
            value = this.value || '';
            if (trim) {
              value = $.trim(value);
            }
            return o[this.name] = value;
          }
        });
        return o;
      },
      title: function(title) {
        return document.title(title);
      },
      navigate: function(route) {
        return Backbone.history.navigate(route, {
          trigger: true
        });
      },
      auth: function() {
        var u;
        u = $.cookie('U');
        if (u != null) {
          return true;
        }
        return false;
      },
      logout: function(cb) {
        return $.post('/api/account/logout').done(function() {
          return cb(null);
        }).fail(function(res) {
          return cb(res.responseText);
        });
      },
      login: function(user, cb) {
        return $.post('/api/account/login', user).done(function() {
          return cb(null);
        }).fail(function(res) {
          return cb(res.responseText);
        });
      }
    };
  });

}).call(this);
