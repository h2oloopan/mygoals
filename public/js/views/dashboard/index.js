// Generated by CoffeeScript 1.6.3
(function() {
  define(['text!templates/dashboard/index.html', 'models/User', 'widgets/addGoal'], function(template, User, AddGoalWidget) {
    var IndexView;
    return IndexView = Backbone.View.extend({
      el: $('#content'),
      events: {
        'click .btn-add-goal': 'addGoal'
      },
      addGoalWidget: null,
      render: function() {
        this.model = new User();
        this.model.url = this.model.urlRoot + '/self';
        this.model.on('change', this.onModelChange, this);
        return this.model.fetch();
      },
      onModelChange: function() {
        return this.$el.html(_.template(template, this.model.toJSON()));
      },
      addGoal: function() {
        this.addGoalWidget = new AddGoalWidget($('#widget_add_goal'));
        return this.addGoalWidget.render();
      }
    });
  });

}).call(this);
