// Generated by CoffeeScript 1.6.2
define(['views/shared/header', 'views/shared/admin/sidebar'], function(HeaderView, SidebarView) {
  var AdminRouter;

  return AdminRouter = Backbone.Router.extend({
    _view: null,
    _header: new HeaderView(),
    _sidebar: new SidebarView(),
    routes: {
      '': 'default',
      'index': 'index',
      'forums': 'forums'
    },
    initialize: function() {
      var router;

      router = this;
      return $.get('/api/account/auth/admin').done(function() {
        router._header.render();
        return router._sidebar.render();
      }).fail(function() {
        return window.location.href = '/';
      });
    },
    change: function(view, options) {
      var context;

      if (this._view != null) {
        this._view.undelegateEvents();
      }
      context = this;
      return require([view], function(View) {
        context._view = new View(options);
        return context._view.render();
      });
    },
    "default": function() {
      this.navigate('index', {
        trigger: true,
        replace: true
      });
      return this._sidebar.render();
    },
    index: function() {
      return this.change('views/admin/index');
    },
    forums: function() {
      return this.change('views/admin/forums');
    }
  });
});
